<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ScrapeBI - Advanced No-Code Web Scraping Tool</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Tailwind CSS with Custom Config -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Outfit', 'Segoe UI', 'system-ui', 'sans-serif'],
                        mono: ['JetBrains Mono', 'Fira Code', 'monospace'],
                    },
                    colors: {
                        navy: {
                            dark: '#020B1F',
                            medium: '#051030',
                            light: '#0A1633',
                            accent: '#0F2050',
                        },
                        electric: {
                            blue: '#2E9BFF',
                            light: '#5AB0FF',
                            dark: '#1A7FDB',
                        },
                        cyan: {
                            sparkle: '#7CFBFF',
                            light: '#A0FFFF',
                            dim: '#5EC8CC',
                        },
                    },
                    boxShadow: {
                        'glow-blue': '0 0 20px rgba(46, 155, 255, 0.4)',
                        'glow-cyan': '0 0 20px rgba(124, 251, 255, 0.5)',
                        'glow-success': '0 0 20px rgba(16, 185, 129, 0.4)',
                    },
                    backdropBlur: {
                        xs: '2px',
                    },
                },
            },
        }
    </script>

    <!-- Custom Styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body class="text-gray-300 antialiased">
    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Header -->
    <header class="glass-panel sticky top-0 mx-4 mt-4 z-[200]">
        <div class="flex items-center justify-between p-5">
            <div class="flex items-center gap-4">
                <div class="flex items-center gap-3">
                    <img src="{{ url_for('static', filename='logo.png') }}" alt="ScrapeBI" class="w-12 h-12 rounded-xl shadow-lg object-cover">
                    <div>
                        <span class="text-2xl font-bold text-white">Scrape</span><span class="text-2xl font-bold text-electric-blue">BI</span>
                    </div>
                </div>
            </div>
            <div class="flex items-center gap-3">
                <button onclick="showHelp()" class="btn btn-shimmer px-3 py-2 text-sm font-semibold text-gray-300 hover:text-white hover:bg-electric-blue/10 rounded-lg transition-all">
                    <i class="fas fa-question-circle"></i>
                    <span class="hidden sm:inline">Help</span>
                </button>
                <a href="https://github.com" target="_blank" class="btn btn-shimmer px-3 py-2 text-sm font-semibold text-gray-300 hover:text-white hover:bg-electric-blue/10 rounded-lg transition-all">
                    <i class="fab fa-github"></i>
                    <span class="hidden sm:inline">GitHub</span>
                </a>
                <div class="w-px h-6 bg-gray-600 mx-2 hidden sm:block"></div>
                <div id="connectionStatus" class="flex items-center gap-2 px-3 py-1.5 rounded-full bg-success/10 border border-success/30">
                    <span class="w-2 h-2 bg-green-400 rounded-full animate-pulse" style="box-shadow: 0 0 10px #10B981;"></span>
                    <span class="text-xs font-semibold text-emerald-400">Ready</span>
                </div>
            </div>
        </div>
        <!-- Accent Line -->
        <div class="h-0.5 bg-gradient-to-r from-electric-blue via-cyan-sparkle to-electric-blue"></div>
    </header>

    <!-- Hero Section -->
    <section class="container mx-auto px-4 mt-10 mb-8">
        <div class="text-center max-w-3xl mx-auto mb-10">
            <h1 class="text-4xl md:text-5xl font-bold mb-4 bg-gradient-to-r from-electric-blue to-cyan-sparkle bg-clip-text text-transparent">
                Extract Data from Any Website
            </h1>
            <p class="text-lg text-gray-300">
                No-code web scraping with visual element selection. Point, click, and extract data in seconds.
            </p>
        </div>

        <!-- URL Input Section -->
        <div class="glass-panel p-6 md:p-8 max-w-4xl mx-auto">
            <div class="flex flex-col md:flex-row gap-4 items-stretch md:items-center">
                <div class="input-group flex-1 relative">
                    <i class="fas fa-globe absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 transition-colors z-10"></i>
                    <input type="text"
                           id="urlInput"
                           class="w-full pl-12 pr-4 py-3.5 bg-navy-light border border-electric-blue/20 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-electric-blue input-glow transition-all"
                           placeholder="Enter website URL (e.g., https://example.com)"
                           value=""
                           autocomplete="off">
                </div>
                <div class="input-group w-full md:w-32 flex-shrink-0 relative">
                    <i class="fas fa-clock absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 transition-colors z-10"></i>
                    <input type="number"
                           id="waitTime"
                           class="w-full pl-12 pr-4 py-3.5 bg-navy-light border border-electric-blue/20 rounded-xl text-white text-center placeholder-gray-400 focus:outline-none focus:border-electric-blue input-glow transition-all"
                           placeholder="Wait"
                           value="3"
                           min="1"
                           max="10"
                           step="1">
                </div>
                <button onclick="scrapeUrl()" class="btn btn-primary-glow btn-shimmer w-full md:w-auto px-6 py-3.5 bg-gradient-to-r from-electric-blue to-cyan-sparkle text-navy-dark font-bold rounded-xl transition-all" id="scrapeBtn">
                    <i class="fas fa-bolt"></i>
                    <span>Scrape</span>
                </button>
            </div>

            <!-- Loading State -->
            <div id="scrapeStatus" class="mt-6 hidden">
                <div class="flex items-center gap-4 p-4 rounded-xl bg-electric-blue/10 border border-electric-blue/20">
                    <div class="loading-spinner"></div>
                    <div class="flex-1">
                        <p class="font-semibold text-electric-blue-light">Scraping website...</p>
                        <p class="text-sm text-gray-400">Please wait while we fetch the page content</p>
                    </div>
                    <div class="loading-dots flex gap-1">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </div>
                <div class="mt-3">
                    <div class="w-full h-1.5 bg-navy-accent rounded-full overflow-hidden">
                        <div class="progress-bar-fill h-full rounded-full" style="width: 0%" id="scrapeProgress"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Progress Steps -->
    <div class="container mx-auto px-4 mb-8">
        <div class="glass-panel p-4 overflow-x-auto">
            <div class="flex items-center justify-between min-w-fit gap-4">
                <div class="flex items-center gap-3 step-item active" data-step="1">
                    <div class="step-circle w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-sm bg-gradient-to-br from-electric-blue to-cyan-sparkle shadow-glow-blue">
                        <i class="fas fa-link"></i>
                    </div>
                    <div class="hidden sm:block">
                        <p class="text-sm font-semibold text-white">Step 1</p>
                        <p class="text-xs text-gray-400">Enter URL</p>
                    </div>
                </div>
                <div class="flex-1 h-px bg-gray-600 step-line hidden sm:block"></div>
                <div class="flex items-center gap-3 step-item" data-step="2">
                    <div class="step-circle w-10 h-10 rounded-full flex items-center justify-center text-gray-400 font-bold text-sm bg-navy-accent">
                        <i class="fas fa-mouse-pointer"></i>
                    </div>
                    <div class="hidden sm:block">
                        <p class="text-sm font-semibold text-gray-400">Step 2</p>
                        <p class="text-xs text-gray-500">Select Elements</p>
                    </div>
                </div>
                <div class="flex-1 h-px bg-gray-600 step-line hidden sm:block"></div>
                <div class="flex items-center gap-3 step-item" data-step="3">
                    <div class="step-circle w-10 h-10 rounded-full flex items-center justify-center text-gray-400 font-bold text-sm bg-navy-accent">
                        <i class="fas fa-filter"></i>
                    </div>
                    <div class="hidden sm:block">
                        <p class="text-sm font-semibold text-gray-400">Step 3</p>
                        <p class="text-xs text-gray-500">Extract Data</p>
                    </div>
                </div>
                <div class="flex-1 h-px bg-gray-600 step-line hidden sm:block"></div>
                <div class="flex items-center gap-3 step-item" data-step="4">
                    <div class="step-circle w-10 h-10 rounded-full flex items-center justify-center text-gray-400 font-bold text-sm bg-navy-accent">
                        <i class="fas fa-download"></i>
                    </div>
                    <div class="hidden sm:block">
                        <p class="text-sm font-semibold text-gray-400">Step 4</p>
                        <p class="text-xs text-gray-500">Export Results</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Container -->
    <div class="container mx-auto px-4 pb-10">
        <!-- Navigation Tabs -->
        <div class="glass-panel mb-6">
            <div class="flex gap-2 p-2 bg-navy-medium rounded-2xl border border-electric-blue/10 overflow-x-auto">
                <button class="tab-btn active flex-1 min-w-fit flex items-center justify-center gap-2 px-5 py-3 text-sm font-semibold text-gray-400 rounded-lg hover:text-white hover:bg-electric-blue/10 transition-all" onclick="switchTab('visual', this)">
                    <i class="fas fa-eye"></i>
                    <span>Visual Selector</span>
                </button>
                <button class="tab-btn flex-1 min-w-fit flex items-center justify-center gap-2 px-5 py-3 text-sm font-semibold text-gray-400 rounded-lg hover:text-white hover:bg-electric-blue/10 transition-all" onclick="switchTab('elements', this)">
                    <i class="fas fa-list"></i>
                    <span>Element List</span>
                </button>
                <button class="tab-btn flex-1 min-w-fit flex items-center justify-center gap-2 px-5 py-3 text-sm font-semibold text-gray-400 rounded-lg hover:text-white hover:bg-electric-blue/10 transition-all" onclick="switchTab('html', this)">
                    <i class="fas fa-code"></i>
                    <span>HTML Code</span>
                </button>
                <button class="tab-btn flex-1 min-w-fit flex items-center justify-center gap-2 px-5 py-3 text-sm font-semibold text-gray-400 rounded-lg hover:text-white hover:bg-electric-blue/10 transition-all" onclick="switchTab('extraction', this)">
                    <i class="fas fa-filter"></i>
                    <span>Extraction Rules</span>
                </button>
                <button class="tab-btn flex-1 min-w-fit flex items-center justify-center gap-2 px-5 py-3 text-sm font-semibold text-gray-400 rounded-lg hover:text-white hover:bg-electric-blue/10 transition-all" onclick="switchTab('results', this)">
                    <i class="fas fa-table"></i>
                    <span>Results</span>
                </button>
            </div>
        </div>

        <!-- Content Area -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Left Panel - Main Content -->
            <div class="lg:col-span-2">
                <!-- Visual Selector Tab -->
                <div id="visualTab" class="tab-content">
                    <div class="glass-panel p-6">
                        <div class="flex justify-between items-center mb-6 flex-wrap gap-4">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-electric-blue to-cyan-sparkle flex items-center justify-center">
                                    <i class="fas fa-eye text-white text-sm"></i>
                                </div>
                                <h3 class="text-lg font-bold text-white">Visual Element Selector</h3>
                            </div>
                            <div class="flex gap-2 flex-wrap">
                                <span class="badge badge-info px-3 py-1 text-xs font-bold uppercase rounded-full bg-cyan-sparkle/15 text-cyan-sparkle border border-cyan-sparkle/30">
                                    <i class="fas fa-mouse-pointer mr-1"></i>
                                    Click to select
                                </span>
                                <button onclick="refreshPreview()" class="btn btn-shimmer px-4 py-2 text-sm font-semibold bg-navy-light text-white border border-electric-blue/30 rounded-lg hover:bg-navy-accent hover:border-electric-blue transition-all">
                                    <i class="fas fa-sync"></i>
                                    <span>Refresh</span>
                                </button>
                            </div>
                        </div>
                        <div id="previewContainer" class="relative">
                            <div id="noPreview" class="text-center py-16">
                                <div class="w-20 h-20 mx-auto mb-6 rounded-full bg-navy-accent flex items-center justify-center">
                                    <i class="fas fa-globe text-4xl text-gray-500"></i>
                                </div>
                                <h4 class="text-lg font-semibold text-white mb-2">No Preview Available</h4>
                                <p class="text-gray-400 max-w-md mx-auto">Enter a URL above and click "Scrape" to see a live visual preview of the page</p>
                            </div>
                            <iframe id="previewFrame" class="preview-frame hidden w-full h-[600px]"></iframe>
                        </div>
                        <div id="selectedElementInfo" class="mt-6 p-5 rounded-xl hidden bg-electric-blue/10 border border-electric-blue/20">
                            <div class="flex items-center gap-2 mb-3">
                                <i class="fas fa-check-circle text-emerald-500"></i>
                                <h4 class="font-bold text-white">Element Selected</h4>
                            </div>
                            <div id="elementDetails" class="space-y-2 text-sm text-gray-300"></div>
                            <div class="mt-4 pt-4 border-t border-electric-blue/10 flex gap-3">
                                <button onclick="createRuleFromSelection()" class="btn btn-glow-success px-4 py-2 text-sm font-semibold bg-gradient-to-r from-emerald-500 to-emerald-400 text-white rounded-lg">
                                    <i class="fas fa-plus"></i>
                                    <span>Create Rule</span>
                                </button>
                                <button onclick="clearSelection()" class="btn btn-shimmer px-4 py-2 text-sm font-semibold text-gray-300 hover:text-white hover:bg-electric-blue/10 rounded-lg transition-all">
                                    <i class="fas fa-times"></i>
                                    <span>Clear</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Element List Tab -->
                <div id="elementsTab" class="tab-content hidden">
                    <div class="glass-panel p-6">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-violet-500 to-violet-400 flex items-center justify-center">
                                <i class="fas fa-list text-white text-sm"></i>
                            </div>
                            <h3 class="text-lg font-bold text-white">Detected Elements</h3>
                        </div>
                        <div id="elementsContainer">
                            <div class="text-center py-16">
                                <div class="w-20 h-20 mx-auto mb-4 rounded-full bg-navy-accent flex items-center justify-center">
                                    <i class="fas fa-search text-4xl text-gray-500"></i>
                                </div>
                                <h4 class="text-lg font-semibold text-white mb-2">No Elements Detected</h4>
                                <p class="text-gray-400">Scrape a website to detect and analyze page elements</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- HTML Code Tab -->
                <div id="htmlTab" class="tab-content hidden">
                    <div class="glass-panel p-6">
                        <div class="flex justify-between items-center mb-6 flex-wrap gap-4">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-amber-500 to-amber-400 flex items-center justify-center">
                                    <i class="fas fa-code text-white text-sm"></i>
                                </div>
                                <h3 class="text-lg font-bold text-white">HTML Source Code</h3>
                            </div>
                            <div class="flex gap-2 flex-wrap">
                                <button onclick="copyHtml()" class="btn btn-shimmer px-4 py-2 text-sm font-semibold bg-navy-light text-white border border-electric-blue/30 rounded-lg hover:bg-navy-accent hover:border-electric-blue transition-all">
                                    <i class="fas fa-copy"></i>
                                    <span>Copy HTML</span>
                                </button>
                                <button onclick="downloadHtml()" class="btn btn-primary-glow btn-shimmer px-4 py-2 text-sm font-semibold bg-gradient-to-r from-electric-blue to-cyan-sparkle text-navy-dark rounded-lg">
                                    <i class="fas fa-download"></i>
                                    <span>Download</span>
                                </button>
                            </div>
                        </div>
                        <div id="htmlInfo" class="mb-4 p-4 rounded-xl hidden bg-electric-blue/10 border border-electric-blue/20">
                            <div class="flex items-start gap-3">
                                <i class="fas fa-info-circle mt-0.5 text-electric-blue"></i>
                                <div class="flex-1">
                                    <p class="font-semibold mb-1 text-electric-blue-light">HTML Source Preview</p>
                                    <p class="text-sm text-gray-400">Showing first 500 lines. Use the buttons above to copy or download the complete HTML source code.</p>
                                    <p class="text-xs mt-2 text-gray-500" id="htmlStats"></p>
                                </div>
                            </div>
                        </div>
                        <pre id="htmlCode" class="code-block rounded-2xl p-5">// Scrape a website to view HTML code</pre>
                    </div>
                </div>

                <!-- Extraction Rules Tab -->
                <div id="extractionTab" class="tab-content hidden">
                    <div class="glass-panel p-6">
                        <div class="flex justify-between items-center mb-6 flex-wrap gap-4">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-xl bg-gradient-to-r from-emerald-500 to-emerald-400 flex items-center justify-center">
                                    <i class="fas fa-filter text-white text-sm"></i>
                                </div>
                                <h3 class="text-lg font-bold text-white">Extraction Rules</h3>
                            </div>
                            <button onclick="showAddRuleModal()" class="btn btn-primary-glow btn-shimmer px-4 py-2 text-sm font-semibold bg-gradient-to-r from-electric-blue to-cyan-sparkle text-navy-dark rounded-lg">
                                <i class="fas fa-plus"></i>
                                <span>Add Rule</span>
                            </button>
                        </div>
                        <div id="rulesContainer">
                            <div class="text-center py-16">
                                <div class="w-20 h-20 mx-auto mb-4 rounded-full bg-navy-accent flex items-center justify-center">
                                    <i class="fas fa-filter text-4xl text-gray-500"></i>
                                </div>
                                <h4 class="text-lg font-semibold text-white mb-2">No Extraction Rules</h4>
                                <p class="text-gray-400">Create rules to define what data you want to extract</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Results Tab -->
                <div id="resultsTab" class="tab-content hidden">
                    <div class="glass-panel p-6">
                        <div class="flex justify-between items-center mb-6 flex-wrap gap-4">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-500 to-indigo-400 flex items-center justify-center">
                                    <i class="fas fa-table text-white text-sm"></i>
                                </div>
                                <h3 class="text-lg font-bold text-white">Extraction Results</h3>
                            </div>
                            <div class="flex gap-2 flex-wrap">
                                <button onclick="exportResults('json')" class="btn btn-shimmer px-4 py-2 text-sm font-semibold bg-navy-light text-white border border-electric-blue/30 rounded-lg hover:bg-navy-accent hover:border-electric-blue transition-all">
                                    <i class="fas fa-file-code"></i>
                                    <span>JSON</span>
                                </button>
                                <button onclick="exportResults('csv')" class="btn btn-shimmer px-4 py-2 text-sm font-semibold bg-navy-light text-white border border-electric-blue/30 rounded-lg hover:bg-navy-accent hover:border-electric-blue transition-all">
                                    <i class="fas fa-file-csv"></i>
                                    <span>CSV</span>
                                </button>
                                <button onclick="exportResults('txt')" class="btn btn-shimmer px-4 py-2 text-sm font-semibold bg-navy-light text-white border border-electric-blue/30 rounded-lg hover:bg-navy-accent hover:border-electric-blue transition-all">
                                    <i class="fas fa-file-alt"></i>
                                    <span>TXT</span>
                                </button>
                            </div>
                        </div>
                        <div id="resultsContainer">
                            <div class="text-center py-16">
                                <div class="w-20 h-20 mx-auto mb-4 rounded-full bg-navy-accent flex items-center justify-center">
                                    <i class="fas fa-table text-4xl text-gray-500"></i>
                                </div>
                                <h4 class="text-lg font-semibold text-white mb-2">No Results Yet</h4>
                                <p class="text-gray-400">Run extraction rules to see extracted data here</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Panel - Sidebar -->
            <div class="space-y-6">
                <!-- Session Info Card -->
                <div class="glass-panel-sm p-5 rounded-xl">
                    <div class="flex items-center gap-2 mb-4">
                        <i class="fas fa-info-circle text-electric-blue"></i>
                        <h4 class="font-bold text-white">Session Status</h4>
                    </div>
                    <div id="sessionInfo" class="mb-3">
                        <span class="badge badge-secondary px-3 py-1 text-xs font-bold uppercase rounded-full bg-gray-600 text-gray-200 border border-gray-500">No active session</span>
                    </div>
                    <div id="pageInfo" class="space-y-3 text-sm hidden">
                        <div class="p-3 rounded-lg bg-electric-blue/5">
                            <p class="text-xs mb-1 text-gray-400">URL</p>
                            <p id="pageUrl" class="font-medium text-white truncate"></p>
                        </div>
                        <div class="p-3 rounded-lg bg-electric-blue/5">
                            <p class="text-xs mb-1 text-gray-400">Page Title</p>
                            <p id="pageTitle" class="font-medium text-white"></p>
                        </div>
                    </div>
                </div>

                <!-- Quick Extract Card -->
                <div class="glass-panel-sm p-5 rounded-xl">
                    <div class="flex items-center gap-2 mb-4">
                        <i class="fas fa-bolt text-amber-500"></i>
                        <h4 class="font-bold text-white">Quick Extract</h4>
                    </div>
                    <div class="space-y-2">
                        <button onclick="quickExtract('headings')" class="w-full btn btn-shimmer flex items-center gap-2 px-4 py-2.5 text-sm hover:bg-electric-blue/5 rounded-lg transition-all">
                            <i class="fas fa-heading w-6 text-electric-blue"></i>
                            <span class="flex-1 text-left text-gray-300">All Headings</span>
                            <i class="fas fa-chevron-right text-xs text-gray-500"></i>
                        </button>
                        <button onclick="quickExtract('links')" class="w-full btn btn-shimmer flex items-center gap-2 px-4 py-2.5 text-sm hover:bg-electric-blue/5 rounded-lg transition-all">
                            <i class="fas fa-link w-6 text-emerald-500"></i>
                            <span class="flex-1 text-left text-gray-300">All Links</span>
                            <i class="fas fa-chevron-right text-xs text-gray-500"></i>
                        </button>
                        <button onclick="quickExtract('images')" class="w-full btn btn-shimmer flex items-center gap-2 px-4 py-2.5 text-sm hover:bg-electric-blue/5 rounded-lg transition-all">
                            <i class="fas fa-image w-6 text-cyan-sparkle"></i>
                            <span class="flex-1 text-left text-gray-300">All Images</span>
                            <i class="fas fa-chevron-right text-xs text-gray-500"></i>
                        </button>
                        <button onclick="quickExtract('paragraphs')" class="w-full btn btn-shimmer flex items-center gap-2 px-4 py-2.5 text-sm hover:bg-electric-blue/5 rounded-lg transition-all">
                            <i class="fas fa-paragraph w-6 text-amber-500"></i>
                            <span class="flex-1 text-left text-gray-300">All Paragraphs</span>
                            <i class="fas fa-chevron-right text-xs text-gray-500"></i>
                        </button>
                        <button onclick="quickExtract('tables')" class="w-full btn btn-shimmer flex items-center gap-2 px-4 py-2.5 text-sm hover:bg-electric-blue/5 rounded-lg transition-all">
                            <i class="fas fa-table w-6 text-rose-500"></i>
                            <span class="flex-1 text-left text-gray-300">All Tables</span>
                            <i class="fas fa-chevron-right text-xs text-gray-500"></i>
                        </button>
                    </div>
                </div>

                <!-- Saved Rules Card -->
                <div class="glass-panel-sm p-5 rounded-xl">
                    <div class="flex items-center gap-2 mb-4">
                        <i class="fas fa-bookmark text-violet-400"></i>
                        <h4 class="font-bold text-white">Saved Rules</h4>
                    </div>
                    <div id="savedRulesList" class="space-y-2">
                        <p class="text-sm text-gray-400">No saved rules</p>
                    </div>
                </div>

                <!-- Run All Button -->
                <button onclick="runAllRules()" class="w-full btn btn-primary-glow btn-shimmer px-6 py-3.5 bg-gradient-to-r from-electric-blue to-cyan-sparkle text-navy-dark font-bold rounded-xl shadow-glow-blue">
                    <i class="fas fa-play"></i>
                    <span>Run All Rules</span>
                </button>

                <!-- Tips Card -->
                <div class="glass-panel-sm p-5 rounded-xl bg-amber-500/10 border border-amber-500/20">
                    <div class="flex items-center gap-2 mb-3">
                        <i class="fas fa-lightbulb text-amber-500"></i>
                        <h4 class="font-bold text-amber-400">Pro Tip</h4>
                    </div>
                    <p class="text-sm text-gray-300">
                        Use CSS selectors like <code class="text-cyan-sparkle">.class-name</code> or <code class="text-cyan-sparkle">#element-id</code> for precise targeting. XPath is great for complex selections!
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Rule Modal -->
    <div id="addRuleModal" class="modal-overlay">
        <div class="modal bg-gradient-card rounded-2xl max-w-2xl w-full overflow-hidden shadow-2xl border border-electric-blue/20">
            <div class="modal-header p-6 border-b border-electric-blue/10 bg-electric-blue/5 flex items-center justify-between">
                <h3 class="text-xl font-bold text-white">
                    <i class="fas fa-plus-circle text-electric-blue mr-2"></i>
                    Add Extraction Rule
                </h3>
                <button onclick="closeAddRuleModal()" class="w-10 h-10 flex items-center justify-center rounded-lg text-gray-400 hover:bg-electric-blue/10 hover:text-cyan-sparkle transition-all">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body p-6 space-y-5 max-h-[calc(70vh-140px)] overflow-y-auto">
                <div>
                    <label class="block text-sm font-semibold mb-2 text-gray-200">
                        <i class="fas fa-tag text-electric-blue mr-2"></i>Rule Name
                    </label>
                    <input type="text" id="ruleName" class="w-full px-4 py-3 bg-navy-light border border-electric-blue/20 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-electric-blue input-glow transition-all" placeholder="e.g., Product Titles, Article Headlines...">
                </div>

                <div>
                    <label class="block text-sm font-semibold mb-2 text-gray-200">
                        <i class="fas fa-crosshairs text-violet-400 mr-2"></i>Selector Type
                    </label>
                    <select id="selectorType" class="w-full px-4 py-3 bg-navy-light border border-electric-blue/20 rounded-xl text-white focus:outline-none focus:border-electric-blue input-glow transition-all select-field" onchange="updateSelectorHelp()">
                        <option value="css">CSS Selector (Recommended)</option>
                        <option value="xpath">XPath (Advanced)</option>
                        <option value="tag">Tag Name</option>
                        <option value="class">Class Name</option>
                        <option value="id">ID</option>
                    </select>
                </div>

                <div>
                    <label class="block text-sm font-semibold mb-2 text-gray-200">
                        <i class="fas fa-search text-emerald-500 mr-2"></i>Selector
                    </label>
                    <input type="text" id="selectorValue" class="w-full px-4 py-3 bg-navy-light border border-electric-blue/20 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-electric-blue input-glow transition-all" placeholder="e.g., .product-title, #main-content, h1...">
                    <p id="selectorHelp" class="text-xs mt-2 text-gray-400">
                        <i class="fas fa-info-circle mr-1"></i>Enter a CSS selector to target elements
                    </p>
                </div>

                <div>
                    <label class="block text-sm font-semibold mb-2 text-gray-200">
                        <i class="fas fa-database text-amber-500 mr-2"></i>Extract Attribute
                    </label>
                    <select id="extractAttribute" class="w-full px-4 py-3 bg-navy-light border border-electric-blue/20 rounded-xl text-white focus:outline-none focus:border-electric-blue input-glow transition-all select-field">
                        <option value="text">üìù Text Content</option>
                        <option value="html">üåê HTML Content</option>
                        <option value="href">üîó Href (for links)</option>
                        <option value="src">üñºÔ∏è Src (for images)</option>
                        <option value="alt">üì∑ Alt Text</option>
                        <option value="title">üìå Title Attribute</option>
                        <option value="id">üè∑Ô∏è ID Attribute</option>
                        <option value="class">üé® Class Attribute</option>
                        <option value="all">üì¶ All Data</option>
                    </select>
                </div>

                <!-- Examples Card -->
                <div class="p-4 rounded-xl bg-electric-blue/10 border border-electric-blue/20">
                    <p class="text-sm font-semibold mb-3 text-gray-200">
                        <i class="fas fa-book-open text-electric-blue mr-2"></i>Example Selectors:
                    </p>
                    <div class="grid grid-cols-2 gap-2 text-xs">
                        <code class="block px-3 py-2 bg-navy-light rounded text-cyan-sparkle border border-cyan-sparkle/20">.product-title</code>
                        <code class="block px-3 py-2 bg-navy-light rounded text-cyan-sparkle border border-cyan-sparkle/20">#main-content</code>
                        <code class="block px-3 py-2 bg-navy-light rounded text-cyan-sparkle border border-cyan-sparkle/20">h1, h2, h3</code>
                        <code class="block px-3 py-2 bg-navy-light rounded text-cyan-sparkle border border-cyan-sparkle/20">a[href^="https"]</code>
                    </div>
                </div>
            </div>
            <div class="modal-footer p-4 border-t border-electric-blue/10 bg-electric-blue/5 flex justify-end gap-3">
                <button onclick="closeAddRuleModal()" class="btn btn-shimmer px-5 py-2.5 text-sm font-semibold bg-navy-light text-white border border-electric-blue/30 rounded-lg hover:bg-navy-accent hover:border-electric-blue transition-all">
                    <i class="fas fa-times"></i>
                    <span>Cancel</span>
                </button>
                <button onclick="saveRule()" class="btn btn-primary-glow btn-shimmer px-5 py-2.5 text-sm font-semibold bg-gradient-to-r from-electric-blue to-cyan-sparkle text-navy-dark rounded-lg">
                    <i class="fas fa-save"></i>
                    <span>Save Rule</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Help Modal -->
    <div id="helpModal" class="modal-overlay">
        <div class="modal bg-gradient-card rounded-2xl max-w-2xl w-full overflow-hidden shadow-2xl border border-electric-blue/20">
            <div class="modal-header p-6 border-b border-electric-blue/10 bg-electric-blue/5 flex items-center justify-between">
                <h3 class="text-xl font-bold text-white">
                    <i class="fas fa-question-circle text-electric-blue mr-2"></i>
                    How to Use ScrapeBI
                </h3>
                <button onclick="closeHelp()" class="w-10 h-10 flex items-center justify-center rounded-lg text-gray-400 hover:bg-electric-blue/10 hover:text-cyan-sparkle transition-all">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body p-6 space-y-6 max-h-[calc(70vh-140px)] overflow-y-auto">
                <!-- Step 1 -->
                <div class="flex gap-4">
                    <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-electric-blue to-cyan-sparkle flex items-center justify-center text-white font-bold flex-shrink-0 shadow-glow-blue">
                        1
                    </div>
                    <div class="flex-1">
                        <h4 class="font-bold text-lg text-white mb-2">Scrape a Website</h4>
                        <p class="text-gray-300">Enter the URL of the website you want to scrape and click the "Scrape" button. The tool will fetch the page using Selenium and render any JavaScript content.</p>
                    </div>
                </div>

                <!-- Step 2 -->
                <div class="flex gap-4">
                    <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-violet-500 to-violet-400 flex items-center justify-center text-white font-bold flex-shrink-0 shadow-glow-blue">
                        2
                    </div>
                    <div class="flex-1">
                        <h4 class="font-bold text-lg text-white mb-2">Select Elements Visually</h4>
                        <p class="text-gray-300">Use the Visual Selector tab to interactively click on elements in the page preview. Hover to highlight elements and click to select them.</p>
                    </div>
                </div>

                <!-- Step 3 -->
                <div class="flex gap-4">
                    <div class="w-12 h-12 rounded-xl bg-gradient-to-r from-emerald-500 to-emerald-400 flex items-center justify-center text-white font-bold flex-shrink-0 shadow-glow-success">
                        3
                    </div>
                    <div class="flex-1">
                        <h4 class="font-bold text-lg text-white mb-2">Create Extraction Rules</h4>
                        <p class="text-gray-300">Create rules to extract specific data:</p>
                        <ul class="list-disc ml-6 mt-2 space-y-1 text-gray-300">
                            <li><strong class="text-white">CSS Selector:</strong> Use CSS selectors like <code class="text-cyan-sparkle">.class</code>, <code class="text-cyan-sparkle">#id</code></li>
                            <li><strong class="text-white">XPath:</strong> Use XPath for complex selections</li>
                            <li><strong class="text-white">Attribute:</strong> Choose what to extract</li>
                        </ul>
                    </div>
                </div>

                <!-- Step 4 -->
                <div class="flex gap-4">
                    <div class="w-12 h-12 rounded-xl bg-gradient-to-r from-amber-500 to-amber-400 flex items-center justify-center text-white font-bold flex-shrink-0 shadow-glow-blue">
                        4
                    </div>
                    <div class="flex-1">
                        <h4 class="font-bold text-lg text-white mb-2">Export Results</h4>
                        <p class="text-gray-300">After running your extraction rules, export the results in your preferred format: JSON, CSV, or TXT.</p>
                    </div>
                </div>

                <!-- Examples -->
                <div class="p-5 rounded-xl bg-electric-blue/5 border border-electric-blue/10">
                    <h4 class="font-bold text-white mb-3">
                        <i class="fas fa-code text-electric-blue mr-2"></i>Example CSS Selectors
                    </h4>
                    <div class="space-y-2 font-mono text-sm">
                        <div class="flex items-center gap-3 p-2 rounded-lg bg-navy-light">
                            <code class="text-blue-400">.product-title</code>
                            <span class="text-gray-400">‚Üí Elements with class "product-title"</span>
                        </div>
                        <div class="flex items-center gap-3 p-2 rounded-lg bg-navy-light">
                            <code class="text-violet-400">#main-content</code>
                            <span class="text-gray-400">‚Üí Element with id "main-content"</span>
                        </div>
                        <div class="flex items-center gap-3 p-2 rounded-lg bg-navy-light">
                            <code class="text-emerald-400">h1, h2, h3</code>
                            <span class="text-gray-400">‚Üí All heading elements</span>
                        </div>
                        <div class="flex items-center gap-3 p-2 rounded-lg bg-navy-light">
                            <code class="text-amber-400">a[href^="https"]</code>
                            <span class="text-gray-400">‚Üí Links starting with https</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer p-4 border-t border-electric-blue/10 bg-electric-blue/5 flex justify-end">
                <button onclick="closeHelp()" class="btn btn-primary-glow btn-shimmer px-6 py-3 text-sm font-semibold bg-gradient-to-r from-electric-blue to-cyan-sparkle text-navy-dark rounded-lg">
                    <i class="fas fa-check"></i>
                    <span>Got it!</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
